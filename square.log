-- FreeFem++ v4.6 (Fri, Apr 03, 2020  2:08:08 PM - git v4.6)
 Load: lg_fem lg_mesh lg_mesh3 eigenvalue
    1 : load "iovtk"(load: loadLibary D:\Arquivos de Programas\FreeFem++\\.\iovtk = 0) load: iovtk
 
    2 :
    3 : // Parameters
    4 : int l = 0;
    5 : int h = 1;
    6 : int n = 10;
    7 :
    8 : // Building Square
    9 : border a(t=l ,h){x=t; y=0;}
   10 : border b(t=l ,h){x=1; y=t;}
   11 : border c(t=l ,h){x=1-t; y=1;}
   12 : border d(t=l ,h){x=0; y=1-t;}
   13 :
   14 : mesh Th = buildmesh(a(n) + b(n) + c(n) + d(n));
   15 :
   16 : // Plot Square
   17 : plot(Th, wait=0, fill=1, cmm="Square");
   18 :
   19 : // Functions space
   20 : fespace Vh(Th, [P1, P1]);
   21 : Vh [vx, vy], [vxTeste, vyTeste];
   22 :
   23 : // Boundary conditions
   24 : solve velocity([vx, vy], [vxTeste, vyTeste]) =
   25 :     int2d(Th)(dx(vx)*dx(vxTeste) + dy(vx)*dy(vxTeste) +
   26 :               dx(vy)*dx(vyTeste) + dy(vy)*dy(vyTeste)) +
   27 :     on(c, vx=1, vy=0) +
   28 :     on(a, b, d, vx=0, vy=0);
   29 :
   30 : plot([vx, vy], wait=1, fill=0, cmm="Step");
   31 :
   32 : // // Alternative
   33 : // plot(vx, wait=1, fill=1, cmm="Velocity in x");
   34 : // plot(vy, wait=1, fill=1, cmm="Velocity in y");
   35 :
   36 : savevtk("D:/Documentos/Permanent-heat-conduction/data/squa
  ... : re.vtk", Th, [vx, vy]);
   37 :
   38 : // Save archive in txt
   39 : ofstream dataSquare("D:/Documentos/Permanent-heat-conduction/data/data
  ... : _square.txt");
   40 :
   41 : dataSquare << "x                      |y                      |v
  ... : x                     |vy         " << endl;
   42 :
   43 : for (int i = 0; i < Th.nv; i++) {
   44 :     real xVal = Th(i).x;
   45 :     real yVal = Th(i).y;
   46 :     real vxVal = vx[](i);
   47 :     real vyVal = vy[](i);
   48 :
   49 :     dataSquare << xVal << "                   |" << yVal << "                     |" << vxVal << "
          |" << vyVal << endl;
   50 : }
   51 :
   52 : cout << "Arquivo 'data_square.txt' salvo com sucesso!" << endl; sizestack + 1024 =1896  ( 872 )
 
  --  mesh:  Nb of Triangles =    240, Nb of Vertices 141
  -- Solve :
          min 0  max 1
 0x10f28550 VTK_FILE 1
Arquivo 'data_square.txt' salvo com sucesso!
times: compile 0.14s, execution 0.097s,  mpirank:0
 ######## We forget of deleting   -426 Nb pointer,   0Bytes  ,  mpirank 0, memory leak =0
 CodeAlloc : nb ptr  3692,  size :480912 mpirank: 0
Ok: Normal End
 try getConsole D:\Documentos\Permanent-heat-conduction\square.edp
