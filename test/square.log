-- FreeFem++ v4.6 (Fri, Apr 03, 2020  2:08:08 PM - git v4.6)
 Load: lg_fem lg_mesh lg_mesh3 eigenvalue
    1 : // Libraries
    2 : load "iovtk"(load: loadLibary D:\Arquivos de Programas\FreeFem++\\.\iovtk = 0) load: iovtk
 
    3 :
    4 : // Parameters
    5 : int l = 0;
    6 : int h = 1;
    7 : int n = 10;
    8 :
    9 : // Building Square
   10 : border a(t=l ,h){x=t; y=0;}
   11 : border b(t=l ,h){x=1; y=t;}
   12 : border c(t=l ,h){x=1-t; y=1;}
   13 : border d(t=l ,h){x=0; y=1-t;}
   14 :
   15 : mesh Th = buildmesh(a(n) + b(n) + c(n) + d(n));
   16 :
   17 : // Plot Square
   18 : plot(Th, wait=0, fill=1, cmm="Square");
   19 :
   20 : // Functions space
   21 : fespace Vh(Th, [P1, P1]);
   22 : Vh [vx, vy], [vxTeste, vyTeste];
   23 :
   24 : // Boundary conditions
   25 : solve velocity([vx, vy], [vxTeste, vyTeste]) =
   26 :     int2d(Th)(dx(vx)*dx(vxTeste) + dy(vx)*dy(vxTeste) +
   27 :               dx(vy)*dx(vyTeste) + dy(vy)*dy(vyTeste)) +
   28 :     on(c, vx=1, vy=0) +
   29 :     on(a, b, d, vx=0, vy=0);
   30 :
   31 : // plot([vx, vy], wait=1, fill=0, cmm="Square");
   32 :
   33 : // // Alternative
   34 : plot(vx, wait=1, fill=1, cmm="Velocity in x");
   35 : plot(vy, wait=1, fill=1, cmm="Velocity in y");
   36 :
   37 : savevtk("D:/Documentos/Permanent-heat-conduction/data/squa
  ... : re.vtk", Th, [vx, vy]);
   38 :
   39 : // Save archive in txt
   40 : ofstream dataSquare("D:/Documentos/Permanent-heat-conduction/data/data
  ... : _square.txt");
   41 :
   42 : dataSquare << "x                      |y                      |v
  ... : x                     |vy         " << endl;
   43 :
   44 : for (int i = 0; i < Th.nv; i++) {
   45 :     real xVal = Th(i).x;
   46 :     real yVal = Th(i).y;
   47 :     real vxVal = vx[](i);
   48 :     real vyVal = vy[](i);
   49 :
   50 :     dataSquare << xVal << "                   |" << yVal << "                     |" << vxVal << "
          |" << vyVal << endl;
   51 : }
   52 :
   53 : cout << "Arquivo 'data_square.txt' salvo com sucesso!" << endl; sizestack + 1024 =1896  ( 872 )
 
  --  mesh:  Nb of Triangles =    240, Nb of Vertices 141
  -- Solve :
          min 0  max 1
 0x10e973b0 VTK_FILE 1
Arquivo 'data_square.txt' salvo com sucesso!
times: compile 0.073s, execution 0.129s,  mpirank:0
 ######## We forget of deleting   -426 Nb pointer,   0Bytes  ,  mpirank 0, memory leak =0
 CodeAlloc : nb ptr  3698,  size :481432 mpirank: 0
Ok: Normal End
 try getConsole D:\Documentos\Permanent-heat-conduction\test\square.edp
